<tool id="gff_to_db" name="GFF to database" version="%(prog)s 0.1">
    
    <description>
    <![CDATA[
        Create a database from a gff file or add to an excisting database.
    ]]>
    </description>
    
    <requirements>
        <requirement type="python-module">gffutils</requirement>
    </requirements>
    
    <stdio>
        <exit_code level="fatal" range="1:"/>
    </stdio>
    
    <version_command>python gff_to_db.py --version</version_command>
    
    <command>
    <![CDATA[
        
        #if $input_database and $input_database not None:
            cp $input_database ./new.sqlite
            &&
        #end if
        
        $__tool_directory__/gff_to_db.py
            #if $gff and $gff is not None:
                --gff $gff
            #end if
            
            #if $input_database and $input_database is not None:
                --input_db ./new.sqlite
            #else
                --new_db $output_database
            #end if
            
        #if $input_database and $input_database not None:
            &&
            cp ./new.sqlite $output_database;
        #end if
        
    ]]>
    </command>
    
    <inputs>
        <param name="gff" type="data" format="gff" help="(--gff)" label="Input GFF file" />
        <param name="input_database" optional="True" type="data" format="sqlite" help="(--input_db)" label="Input database (optional)" />
    </inputs>
    
    <outputs>
        <data name="output_database" format="sqlite" label="database of ${tool.name} on ${on_string}" />
    </outputs>
    
    <tests>
        <test>
            <param name="gff" value="FlyBase.gff" />
            <output name="output_database" file="FlyBase.db" compare="sim_size" />
        </test>
    </tests>
    
    <help>
    <![CDATA[
        **What it does**
        
        Create a database from a gff file or add to an excisting database.
        
    ]]>
    </help>
  
    <citations>
        <citation type="bibtex">
            @ARTICLE{bgruening_galaxytools,
                Author = {Björn Grüning, Cameron Smith, Torsten Houwaart, Nicola Soranzo, Eric Rasche},
                keywords = {bioinformatics, ngs, galaxy, cheminformatics, rna},
                title = {{Galaxy Tools - A collection of bioinformatics and cheminformatics tools for the Galaxy environment}},
                url = {https://github.com/bgruening/galaxytools}
            }
        </citation>
    </citations>
    
</tool>

